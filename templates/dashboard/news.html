{% extends 'dashboard/dashboard_base.html' %}
{% load static %}
{% block title %}
Dashboard | News
{% endblock title %}

{% block css %}
{% endblock css %}

<h1 class="d-inline-block ml-auto text-light">
    {% block dashboard_title %}News{% endblock dashboard_title%}
</h1>

{% block content %}
<style>
    .published {
        color: #fff;
        background-color: green;
    }
    
    .not-published {
        color: #fff;
        background-color: red;
    }
    
</style>
<h1>News List</h1>
<div class="row mb-3">
    <div class="col-md-4">
        <a href="{% url 'dashboard:add_news' %}" class="bg-success p-2 text-light rounded">
            <i class="fa fa-add text-light mr-1"></i>Add
        </a>
    </div>
    <div class="col-md-8 mt-2">
        <div class="input-group">
            <input type="text" class="form-control" id="searchInput" placeholder="Search...">
            <div class="input-group-append">
                <button class="btn btn-primary" type="button" id="searchButton">
                    <i class="fa fa-search"></i>
                </button>
            </div>
            <div class="input-group-append">
                <span class="input-group-text bg-danger text-light ml-2" id="clearSearchInput" style="cursor: pointer;">
                    <i class="fa-solid fa-eraser"></i>
                </span>
            </div>
        </div>
    </div>
</div>

<table class="table">
    <thead class="thead-dark">
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Image</th>
            <th>Created At</th>
            <th>Last Updated At</th>
            <th>Status</th> 
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for news_item in news_items %}
        <tr>
            <td>{{ news_item.title }}</td>
            <td>{{ news_item.description }}</td>
            <td>
                {% if news_item.image %}
                <img src="{{ news_item.image.url }}" alt="{{ news_item.title }}" width="100" class="img-fluid rounded image-fullscreen-trigger">
                {% else %}
                No Image
                {% endif %}
            </td>
            <td>{{ news_item.created_at }}</td>
            <td>{{ news_item.updated_at }}</td>
            <td class="{% if news_item.is_published %}published{% else %}not-published{% endif %}">
                {% if news_item.is_published %}Published{% else %}Not Published{% endif %}
            </td>
            
            <td style="white-space: nowrap; width: 1%;">
                <a href="{% url 'dashboard:edit_news' news_item.id %}" class="btn btn-primary"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                <a href="{% url 'dashboard:update_history' news_item.id %}" class="btn btn-warning"><i class="fa-solid fa-clock-rotate-left"></i></a>
                <button type="button" class="btn btn-danger" onclick="confirmDelete('{{ news_item.id }}')"><i class="fa fa-trash" aria-hidden="true"></i></button>
                <!-- Form for deletion, hidden initially -->
                <form id="deleteForm-{{ news_item.id }}" action="{% url 'dashboard:delete_news' news_item.id %}" method="post" style="display: none;">
                    {% csrf_token %}
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div id="fullscreen" class="fullscreen hidden-bottom" style="display: none;">
    <span class="close-btn" onclick="closeFullScreen()">
        <i class="fa fa-times" style="color:red;" aria-hidden="true"></i>
    </span>
    <img id="fullscreen-img" src="" alt="Full Screen Image">
    <div class="zoom-controls">
        <button onclick="zoomIn()">Zoom In <i class="fa fa-plus" aria-hidden="true"></i></button>
        <button onclick="zoomOut()">Zoom Out <i class="fa fa-minus" aria-hidden="true"></i></button>
    </div>
</div>

{% endblock content %}
